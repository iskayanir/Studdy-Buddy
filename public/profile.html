<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>
    <link rel="stylesheet" href="css/ready_profile_style.css">
    <style>@import url('https://fonts.googleapis.com/css2?family=Assistant:wght@200..800&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap');</style>
  </head>
  <body>
    <header>
        <img src="images/logo3.png" class="logo" alt="Logo">
        <nav class="navbar">
            <ul>
                <li><a href="profile.html">הפרופיל שלי</a></li>
                <li><a href="#" onclick="navigateToCourses()">הקורסים שלי</a></li>
                <li><a href="search_page.html">חיפוש קורסים</a></li>
            </ul>
        </nav>
    </header>

    <div class="help-section" id="helpSection">
        <button class="help-toggle" onclick="toggleHelp()">עזרה</button>
        <div class="help-content" id="helpContent">
          <h3>הגעת לעמוד הפרופיל שלך!</h3>
          <p>כאן תוכלו לראות את כל הפרטים שהכנסתם על עצמכם. <br><br> אם תרצו להוסיף או לשנות עוד פרטים, קצת לשתף על עצמכם ועל התחביבים שלכם, <br> לחצו על כפתור "עדכון פרטים" והוסיפו בקלות!</p><br>

          <p>רוצים לשנות תמונת פרופיל? <br> לחצו על התמונה הקיימת ותוכלו לשנות את התמונה למה שתרצו!</p>
        </div>
      </div>

    <article class="container">
        <figure class="banner"></figure>
        <figure class="profile_picture_container">
          <img id="profilePicture" src="images/prof.jpeg" alt="profile picture" class="profile_picture">
          <div class="hover_message">עדכן תמונת פרופיל</div>
          <input type="file" id="profilePictureInput" accept="image/*" style="display: none;">
        </figure>
    </article>
    <article class="top-of-form">
    </article>
    <section class="form-content">
        <div class="name">
            <strong>שם:</strong> <span id="displayName"></span>
        </div><br>
        <div class="degree">
            <strong>תואר:</strong> <span id="displayDegree"></span>
        </div><br>
        <div class="year">
            <strong>שנה בתואר:</strong> <span id="displayYear"></span>
        </div><br>
        <div>
            <strong>קצת עליי:</strong> <span id="displayAboutMe"></span>
        </div><br>
        <div>
            <strong>התחביבים שלי:</strong> <span id="displayHobbies"></span>
        </div><br>
        <div>
            <strong>מספר טלפון:</strong> <span id="displayPhoneNumber"></span>
        </div><br>
        <div>
            <strong>מייל:</strong> <span id="displayEmail"></span>
        </div> <br>  
        <div>
            <strong>הקורסים שלי:</strong> <span id="displayCourses"></span>
            <ul class="courses" id="courseList">
                <!-- הקורסים יופיעו כאן -->
            </ul>
        </div> <br>

        <article class="buttons">
            <article class="edit">
                <a href="edit_profile.html">
                  <button class="edit">עדכון פרטים</button>
                </a>
            </article>
        </article>
        
    </section>
</body>
<script src="js/script.js"></script>
<script type="module">
    import { navigateToCourses } from './js/firebase-app.js';
  
  </script>
<script >
    // קריאה לפונקציה לאחר טעינת הדף
    window.onload = function() {
        loadProfileData();
        // שליפת נתוני המשתמש מ-Local Storage
        var userData = JSON.parse(localStorage.getItem('userData'));
        if (userData) {
            document.getElementById('profilePicture').src = userData.imageUrl || 'images/prof.jpeg';
        }
    };

    document.addEventListener('DOMContentLoaded', function() {
            var helpSection = document.getElementById('helpSection');
            var content = document.getElementById("helpContent");
            var icon = document.getElementById("helpIcon");
            
            // Check if this is the first visit
            if (!localStorage.getItem('hasVisited')) {
                // If it's the first visit, show the help content
                content.classList.add("show");
                icon.classList.remove("bi-info");
                icon.classList.add("bi-x");
                
                // Set the flag in localStorage
                localStorage.setItem('hasVisited', 'true');
            }
    });

    function toggleHelp() {
        var content = document.getElementById("helpContent");
        var icon = document.getElementById("helpIcon");
        
        content.classList.toggle("show");
        
        if (content.classList.contains("show")) {
            icon.classList.remove("bi-info");
            icon.classList.add("bi-x");
        } else {
            icon.classList.remove("bi-x");
            icon.classList.add("bi-info");
        }
    }
</script>
