<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studdy Buddy - Student Mentor</title>
    <link rel="stylesheet" href="../css/seller.css">
    <style>@import url('https://fonts.googleapis.com/css2?family=Assistant:wght@200..800&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap');</style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
</head>
<body>
    <header>
        <img src="images/logo3.png" class="logo" alt="Logo">
        <nav class="navbar">
            <ul>
                <li><a href="profile.html">הפרופיל שלי</a></li>
                <li><a href="#" onclick="navigateToCourses()">הקורסים שלי</a></li>
                <li><a href="search_page.html"> חיפוש קורסים</a></li>
            </ul>
        </nav>
    </header>

    <div class="help-section" id="helpSection">
        <button class="help-toggle" onclick="toggleHelp()">עזרה</button>
        <div class="help-content" id="helpContent">
          <h3>הגעת לעמוד הקורסים שלך!</h3>
          <p>בעמוד זה תוכלו לראות את כל הבקשות שהועלו לפי כל קורס. <br> תוכלו לראות ולסנן בקשות לפי:</p>
          <ul>
            <li>סיכום בנושא מסוים</li>
            <li>השלמה של נושא </li>
            <li>עזרה בתרגיל בית ספציפי</li>
          </ul>
          <p>ראיתם בקשה שאתם יכולים לעזור בה? <br> לחצו על הכפתור "אני רוצה לעזור!" ותקבלו את הפרטים של הסטודנט המבקש.</p>
          <p>הפרטים שלכם יישלחו אל הסטודנט המבקש גם במייל, ככה ששניכם יכולים ליצור קשר אחד עם השני.</p>
          <p>אישרתם בקשה? <br> תוכלו לראות את כל הבקשות שאישרת בלחיצה על הכפתור "בקשות מאושרות".</p>
        </div>
      </div>

    <article class="welcome">
        <h1><span id="name-placeholder"></span></h1>
        <h3>איך תעזרו היום? </h3>
    </article>
    

    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>


<script>
    document.addEventListener('DOMContentLoaded', function() {
    const dropdownToggle = document.querySelector('.dropdown-toggle');
    const dropdownMenu = document.querySelector('.dropdown-menu');
    const checkboxes = dropdownMenu.querySelectorAll('input[type="checkbox"]');
    const divs = document.querySelectorAll('.content div');

    // Toggle dropdown visibility
    dropdownToggle.addEventListener('click', function() {
        dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
    });

    // Filter divs based on selected checkboxes
    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
            const selectedClasses = Array.from(checkboxes)
                .filter(checkbox => checkbox.checked)
                .map(checkbox => checkbox.value);

            divs.forEach(div => {
                const span = div.querySelector('span');
                if (span && selectedClasses.includes(span.className)) {
                    div.style.display = 'block';
                } else {
                    div.style.display = 'none';
                }
            });
        });
    });

    // Close the dropdown menu if clicked outside
    window.addEventListener('click', function(e) {
        if (!dropdownToggle.contains(e.target) && !dropdownMenu.contains(e.target)) {
            dropdownMenu.style.display = 'none';
        }
    });
});
</script>
    <div class="container">
        <div class="section" id="section5">
            <div class="banner-container">
                <figure class="banner">
                    <div id = idcurrentcourse></div>
                    <h3 id = "coursedata"></h3><br> <!-- הודעה מותאמת לשם הקורס -->
                    
                </figure>
            </div>
            <div class="dropdown">
                <button class="dropdown-toggle">בחר סוג עזרה</button>
                <div class="dropdown-menu">
                    <label>
                        <input type="checkbox" value="summary-sicom"> סיכום שיעור
                    </label>
                    <label>
                        <input type="checkbox" value="summary-hashlama"> השלמת נושא
                    </label>
                    <label>
                        <input type="checkbox" value="summary-ezra"> עזרה בתרגיל בית
                    </label>
                </div>
            </div>
            <div class="course-content-grid" id="course-content">

            </div>
            <div id="additionalFields"></div>
        </div>

        <div class="section" id="section6">
            <div class="buttons-container">
                <button id="approvedrequests" class="black" onclick="showapprovedrequest()">
                    <span>
                        <i class="bi bi-bookmark-check"></i>
                        בקשות מאושרות
                    </span>
                </button>
            </div>
            <ul>
            <figure class="small-banner" id = "courses_buttons">
                <h2>הקורסים שלך</h2>
            </figure>
            </ul>
            
        </div>
    </div>


    <script src="js/seller.js"></script>
    <!-- <script type="module">
        import { sendEmail } from './js/firebase-app.js';
      
      </script> -->
    <script>
        window.onload = function(){
            // שליפת נתוני המשתמש מ-Local Storage
            var userData = JSON.parse(localStorage.getItem('userData'));   
            if (userData) {
                // Get the user's name
                var userName = userData.name || '';
                // Update the HTML content with the user's name
                var nameElement = document.getElementById('name-placeholder');
                if (nameElement) {
                    nameElement.textContent = `היי ${userName}!`;
            }
            var email = userData.email || '';
            console.log(email) 
            // עזרה כאן!!
            loadCoursesDatafromFB(email)
        };
    }
    
    document.addEventListener('DOMContentLoaded', function() {
            var helpSection = document.getElementById('helpSection');
            var content = document.getElementById("helpContent");
            var icon = document.getElementById("helpIcon");
            
            // Check if this is the first visit
            if (!localStorage.getItem('hasVisited')) {
                // If it's the first visit, show the help content
                content.classList.add("show");
                icon.classList.remove("bi-info");
                icon.classList.add("bi-x");
                
                // Set the flag in localStorage
                localStorage.setItem('hasVisited', 'true');
            }
        });

        function toggleHelp() {
            var content = document.getElementById("helpContent");
            var icon = document.getElementById("helpIcon");
            
            content.classList.toggle("show");
            
            if (content.classList.contains("show")) {
                icon.classList.remove("bi-info");
                icon.classList.add("bi-x");
            } else {
                icon.classList.remove("bi-x");
                icon.classList.add("bi-info");
            }
        }

    </script>
    
</body>
</html>

